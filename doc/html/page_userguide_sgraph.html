<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>GraphLab Create SDK API: SGraph User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GraphLab Create SDK API
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_userguide_sgraph.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SGraph User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sec_sgraph_construction">Construction</a></li>
<li class="level1"><a href="#sec_sgraph_query">Query vertices and edges</a><ul><li class="level2"><a href="#sec_sgraph_nonconst_query">Non-const Query</a></li>
<li class="level2"><a href="#sec_sgraph_const_query">Const Query</a></li>
<li class="level2"><a href="#sec_sframe_gframe">Using SFrame or GFrame?</a></li>
</ul>
</li>
<li class="level1"><a href="#sec_sgraph_computation">User Defined Graph Computation</a></li>
<li class="level1"><a href="#sec_sgraph_python_binding">Python Binding</a></li>
<li class="level1"><a href="#sec_sgraph_technical_details">Technical Details</a><ul><li class="level2"><a href="#sec_sgraph_mutability">Mutability</a></li>
<li class="level2"><a href="#sec_sgraph_lazy_eval">Lazy Evaluation</a></li>
</ul>
</li>
<li class="level1"><a href="#sec_sgraph_example">Example</a></li>
</ul>
</div>
<div class="textblock"><p>SGraph (<a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> in the sdk) is a scalable graph data structure backed by persistent storage SFrame (<a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a>).</p>
<p>On a single commodity machine, SGraph can scale to a graph with billions of edges and hundreds of millions of vertices.</p>
<p><a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> makes it easy to do following tasks efficiently:</p><ol type="1">
<li>construct a graph from tabular data with optional data on vertices and edges.</li>
<li>query vertices or edges with given ids or field constraints.</li>
<li>manipulate vertex or edge data fields as SFrames.</li>
<li>apply user defined computation on the graph.</li>
</ol>
<p>In this tutorial, we first walk you through each of the bullet points above. Next, we emphasize several important technical details that makes SGraph efficient. Finally, we point you to the <b>sdk_example/</b> for concrete examples.</p>
<h1><a class="anchor" id="sec_sgraph_construction"></a>
Construction</h1>
<p>There are several ways to create a <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>.</p>
<p>The simplest way is to add vertices and edges using the <a class="el" href="classgraphlab_1_1gl__sgraph.html#a610c4ee360bd0d487a44fc347043d9e9">gl_sgraph::add_vertices</a> and <a class="el" href="classgraphlab_1_1gl__sgraph.html#a98c444797769c43ea519aa8658ac6735">gl_sgraph::add_edges</a> methods.</p>
<div class="fragment"><div class="line">gl_sframe g;  <span class="comment">// empty graph</span></div>
<div class="line">gl_sframe vertices { {<span class="stringliteral">&quot;vid&quot;</span>, {1,2,3} };</div>
<div class="line">gl_sframe edges { {<span class="stringliteral">&quot;src&quot;</span>, {1, 3}}, {<span class="stringliteral">&quot;dst&quot;</span>, {2, 2}} };</div>
<div class="line">g = g.add_vertices(vertices, <span class="stringliteral">&quot;vid&quot;</span>).add_edges(edges, <span class="stringliteral">&quot;src&quot;</span>, <span class="stringliteral">&quot;dst&quot;</span>);</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The vertex id column in the original vertex SFrame will be renamed to "__id", and the source id and target id column in the original edge SFrame will be renamed to "__src_id", and "__dst_id" respectively.</dd>
<dd>
Columns in <a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> that are not used as one of the id fields are treated as meta data fields.</dd></dl>
<p>The second way is to use the <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> constructor.</p>
<div class="fragment"><div class="line">gl_sframe vertices { {<span class="stringliteral">&quot;vid&quot;</span>, {1,2,3}, {<span class="stringliteral">&quot;vdata&quot;</span> : {<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;foobar&quot;</span>}} };</div>
<div class="line">gl_sframe edges { {<span class="stringliteral">&quot;src&quot;</span>, {1,2,3, 2,3,1}}, {<span class="stringliteral">&quot;dst&quot;</span>, {2,3,1, 1,2,3}} };</div>
<div class="line"></div>
<div class="line"><span class="comment">// g has edges 1-&gt;2, 2-&gt;1, 2-&gt;3, 3-&gt;2, 3-&gt;1, 1-&gt;3</span></div>
<div class="line">gl_sgraph g = gl_sgraph(vertices, edges, <span class="stringliteral">&quot;vid&quot;</span>, <span class="stringliteral">&quot;src&quot;</span>, <span class="stringliteral">&quot;dst&quot;</span>);</div>
</div><!-- fragment --><p>By default, the constructor assumes columns "__id", "__src_id" and "__dst_id" exist. This can be very useful when <b> extracting subgraphs </b>. For instance, the following code removes bidirectional edges. </p><div class="fragment"><div class="line"><span class="comment">// g2 has edges 1-&gt;2, 2-&gt;3, 1-&gt;3</span></div>
<div class="line">gl_sgraph g2 = gl_sgraph(g.vertices(),</div>
<div class="line">                         g.edges()[g.edges()[<span class="stringliteral">&quot;__src_id&quot;</span>] &lt; g.edges()[<span class="stringliteral">&quot;__dst_id&quot;</span>]]);</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_sgraph_query"></a>
Query vertices and edges</h1>
<p>There are two ways to query vertices and edges:</p><ul>
<li>Option 1 (non const): <a class="el" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">gl_sgraph::vertices</a> and <a class="el" href="classgraphlab_1_1gl__sgraph.html#a0f717c057949297248c5ac8e302e1e10">gl_sgraph::edges</a></li>
<li>Option 2 (const): <a class="el" href="classgraphlab_1_1gl__sgraph.html#ada3ad0549f8f1b21b2ff8d490efaa11b">gl_sgraph::get_vertices</a> and <a class="el" href="classgraphlab_1_1gl__sgraph.html#a6b3077459fac67d66377cebf0ebdf5cf">gl_sgraph::get_edges</a></li>
</ul>
<p>The main difference is that methods in option 2 are const, returning <a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> independent of the queried graph. Methods in option 1 are not const, returning <a class="el" href="classgraphlab_1_1gl__gframe.html">gl_gframe</a> that can be used to modify the data of the queried graph.</p>
<p>The distinction will be made more clear through examples. Let's begin with Option 2.</p>
<h2><a class="anchor" id="sec_sgraph_nonconst_query"></a>
Non-const Query</h2>
<p>The most convenient way to access vertex and edge data is through the <a class="el" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">gl_sgraph::vertices</a> and <a class="el" href="classgraphlab_1_1gl__sgraph.html#a0f717c057949297248c5ac8e302e1e10">gl_sgraph::edges</a> methods.</p>
<p>Both functions return a GFrame (<a class="el" href="classgraphlab_1_1gl__gframe.html">gl_gframe</a>) object &ndash; an SFrame like object but <b>bound</b> to its parent SGraph. This means the modification to GFrame is applied to SGraph, and vice versa.</p>
<p>For instance, the following code shows how to add/remove columns to/from the vertex data. The change is applied to SGraph. </p><div class="fragment"><div class="line"><span class="comment">// add a new edge attribute with const value.</span></div>
<div class="line">g.edges().add_column(<span class="stringliteral">&quot;likes&quot;</span>, 0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// remove a vertex attribute.</span></div>
<div class="line">g.vertices().remove_column(<span class="stringliteral">&quot;age&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// transforms one attribute to the other</span></div>
<div class="line">g.vertices()[<span class="stringliteral">&quot;likes_fish&quot;</span>] = g.vertices()[<span class="stringliteral">&quot;__id&quot;</span>] == <span class="stringliteral">&quot;cat&quot;</span>;</div>
</div><!-- fragment --><p>This is equal to the following code which uses lower level SGraph APIs. </p><div class="fragment"><div class="line"><span class="comment">// add a new edge attribute with const value.</span></div>
<div class="line">g.add_edge_field(<a class="code" href="classgraphlab_1_1gl__sarray.html#a9c934f63da388930599ed12ca1fb8a9f">gl_sarray::from_const</a>(0, g.num_edges()), <span class="stringliteral">&quot;likes&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// remove a vertex attribute.</span></div>
<div class="line">g.remove_edge_field(<span class="stringliteral">&quot;age&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// transforms one attribute to the other</span></div>
<div class="line"><span class="keywordflow">if</span> <span class="stringliteral">&quot;likes_fish&quot;</span> in g.get_vertex_fields():</div>
<div class="line">    g.remove_vertex_field(<span class="stringliteral">&quot;likes_fish&quot;</span>)</div>
<div class="line">g.add_vertex_field(g.get_vertices()[<span class="stringliteral">&quot;__id&quot;</span>] == <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;likes_fish&quot;</span>);</div>
</div><!-- fragment --><p> As you can tell, using GFrame makes vertex and edge data manipulation much simpler.</p>
<dl class="section note"><dt>Note</dt><dd>Special columns such as "__id", "__src_id" and "__dst_id" cannot be modified, because they represent the structure of the SGraph.</dd></dl>
<h2><a class="anchor" id="sec_sgraph_const_query"></a>
Const Query</h2>
<p><a class="el" href="classgraphlab_1_1gl__sgraph.html#ada3ad0549f8f1b21b2ff8d490efaa11b">gl_sgraph::get_vertices</a> and <a class="el" href="classgraphlab_1_1gl__sgraph.html#a6b3077459fac67d66377cebf0ebdf5cf">gl_sgraph::get_edges</a> allow you to query for specific subset of vertices and edges. The return objects are SFrames that are <b>independent</b> of the SGraph.</p>
<p>For instance, </p><div class="fragment"><div class="line">gl_sframe selected_edges = g.get_edges( { {0, <a class="code" href="group__group__gl__flexible__type.html#ggaede798d6769152c1e46fd2c8983e5755a0db45d2a4141101bdfe48e3314cfbca3">UNDEFINED</a>}, {<a class="code" href="group__group__gl__flexible__type.html#ggaede798d6769152c1e46fd2c8983e5755a0db45d2a4141101bdfe48e3314cfbca3">UNDEFINED</a>, 1}, {2, 3} },</div>
<div class="line">                                        { {<span class="stringliteral">&quot;likes_fish&quot;</span>, 1} } );</div>
</div><!-- fragment --><p> selects out going edges of 0, incoming edges of 1, edge 2-&gt;3, such that the edge attribute "like_fish" evaluates to 1.</p>
<h2><a class="anchor" id="sec_sframe_gframe"></a>
Using SFrame or GFrame?</h2>
<p>GFrame is made to resemble SFrame as much as possible, and it can be used anywhere that expects an SFrame, and the output will be the same.</p>
<p>You can perform non-mutating <a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> operations like groupby, join, logical_filter with <a class="el" href="classgraphlab_1_1gl__gframe.html">gl_gframe</a> in the same way, and the returned object will always be <a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a>.</p>
<p>However, when you want to modify fields of the SGraph, make sure to use <a class="el" href="classgraphlab_1_1gl__gframe.html">gl_gframe</a>. For instance, </p><div class="fragment"><div class="line"><span class="comment">// This will assign all vertex vertex with field &quot;foo&quot; equal to bar.</span></div>
<div class="line">g.vertices()[<span class="stringliteral">&quot;foo&quot;</span>] = <span class="stringliteral">&quot;bar&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This will not have any effect on &quot;g&quot;.</span></div>
<div class="line">g.get_vertices()[<span class="stringliteral">&quot;foo&quot;</span>] = <span class="stringliteral">&quot;bar&quot;</span>;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><a class="el" href="classgraphlab_1_1gl__gframe.html">gl_gframe</a> is implemented as a subclass of <a class="el" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a>, with overloaded functions like: <a class="el" href="classgraphlab_1_1gl__sframe.html#a0ae6f9b9e23caa56397851c2164b81c1">gl_sframe::add_columns</a>, <a class="el" href="classgraphlab_1_1gl__sframe.html#a52b82fd853d94577b2b2df8c7f50e10e">gl_sframe::remove_column</a>, etc. It holds a pointer to the parent <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>, and implements the overloading using corresponding <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> operations.</dd></dl>
<h1><a class="anchor" id="sec_sgraph_computation"></a>
User Defined Graph Computation</h1>
<p>In the case where you want to perform vertex-specified operations, such as "gather"/"scatter" over the neighborhood of each vertex, we provide <a class="el" href="classgraphlab_1_1gl__sgraph.html#a3345cd1314d9c77755b500b8cf54ca5d">gl_sgraph::triple_apply</a> which is essentially a "parallel for" over (Vertex, Edge, Vertex) triplets, as shown in the following pseudo code: </p><div class="fragment"><div class="line">INPUT: G: gl_sgraph, lambda: (V, E, V)-&gt;<span class="keywordtype">void</span></div>
<div class="line">OUTPUT: G<span class="stringliteral">&#39;: gl_sgraph</span></div>
<div class="line"><span class="stringliteral">G&#39;</span> = copy(G)</div>
<div class="line">PARALLEL FOR (source, edge, target) in G&#39;:</div>
<div class="line">  LOCK (source, target)</div>
<div class="line">     edge_triple triple(source, edge, target)</div>
<div class="line">     lambda(triple)</div>
<div class="line">     FOR f in mutated_fields:</div>
<div class="line">       source[f] = triple.source[f] <span class="comment">// if f in source</span></div>
<div class="line">       target[f] = triple.target[f] <span class="comment">// if f in target</span></div>
<div class="line">       edge[f] = triple.edge[f] <span class="comment">// if f in edge</span></div>
<div class="line">     END FOR</div>
<div class="line">  UNLOCK (source, target)</div>
<div class="line">END PARALLEL FOR</div>
<div class="line">RETURN G&#39;</div>
</div><!-- fragment --><p>For instance, the following code shows how to implement the update function for synchronous pagerank.</p>
<div class="fragment"><div class="line"><span class="comment">// \file demo_pagerank.cpp</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;graphlab/sdk/toolkit_function_macros.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;graphlab/sdk/gl_sgraph.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacegraphlab.html">graphlab</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> RESET_PROB = 0.15;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> pr_update(edge_triple&amp; triple) {</div>
<div class="line">  triple.target[<span class="stringliteral">&quot;pagerank&quot;</span>] += triple.source[<span class="stringliteral">&quot;pagerank_prev&quot;</span>] / triple.source[<span class="stringliteral">&quot;out_degree&quot;</span>];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> pagerank(<span class="keyword">const</span> <a class="code" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>&amp; g, <span class="keywordtype">size_t</span> num_iterations) {</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Count the out degree of each vertex into an gl_sframe.</span></div>
<div class="line">  <a class="code" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> out_degree = g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a6b3077459fac67d66377cebf0ebdf5cf">get_edges</a>().<a class="code" href="classgraphlab_1_1gl__sframe.html#aba7cf984043111d6606da93a5271177b">groupby</a>({<span class="stringliteral">&quot;__src_id&quot;</span>}, {{<span class="stringliteral">&quot;out_degree&quot;</span>, <a class="code" href="namespacegraphlab_1_1aggregate.html#a7960880f3974c4eeaa1a31ac43679d31">aggregate::COUNT</a>()}});</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add the computed &quot;out_degree&quot; to the graph as vertex atrribute.</span></div>
<div class="line">  <span class="comment">// We exploit that adding the same vertex will overwrite the vertex data.</span></div>
<div class="line">  <a class="code" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> g2 = g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a610c4ee360bd0d487a44fc347043d9e9">add_vertices</a>(out_degree, <span class="stringliteral">&quot;__src_id&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize pagerank value</span></div>
<div class="line">  g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank&quot;</span>] = 0.0;</div>
<div class="line">  g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank_prev&quot;</span>] = 1.0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; num_iterations; ++i) {</div>
<div class="line">    g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank&quot;</span>] = 0.0;</div>
<div class="line"></div>
<div class="line">    g2 = g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a3345cd1314d9c77755b500b8cf54ca5d">triple_apply</a>(pr_update, {<span class="stringliteral">&quot;pagerank&quot;</span>});</div>
<div class="line"></div>
<div class="line">    g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank&quot;</span>] = RESET_PROB + (1 - RESET_PROB) * g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank&quot;</span>];</div>
<div class="line">    g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank_prev&quot;</span>] = g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;pagerank&quot;</span>];</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>().<a class="code" href="classgraphlab_1_1gl__gframe.html#a27c3f341e90f3da573ff6dd37b675da2">remove_column</a>(<span class="stringliteral">&quot;pagerank_prev&quot;</span>);</div>
<div class="line">  g2.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>().<a class="code" href="classgraphlab_1_1gl__gframe.html#a27c3f341e90f3da573ff6dd37b675da2">remove_column</a>(<span class="stringliteral">&quot;out_degree&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> g2;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(pagerank, <span class="stringliteral">&quot;g&quot;</span>, <span class="stringliteral">&quot;num_iterations&quot;</span>);</div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div>
</div><!-- fragment --><h1><a class="anchor" id="sec_sgraph_python_binding"></a>
Python Binding</h1>
<p>When used as an input argument in an SDK function, it permits a Python SGraph to be passed as an argument. When used in an output argument, it will return a Python SGraph.</p>
<p>For instance: </p><div class="fragment"><div class="line"><span class="comment">// \file example.cpp</span></div>
<div class="line"><span class="comment">// Compiled as example.so</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;graphlab/sdk/toolkit_function_macros.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;graphlab/sdk/gl_sgraph.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacegraphlab.html">graphlab</a>;</div>
<div class="line"></div>
<div class="line"><a class="code" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> count_out_degree(<span class="keyword">const</span> <a class="code" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>&amp; g) {</div>
<div class="line">  <a class="code" href="classgraphlab_1_1gl__sframe.html">gl_sframe</a> sf = g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a6b3077459fac67d66377cebf0ebdf5cf">get_edges</a>().<a class="code" href="classgraphlab_1_1gl__sframe.html#aba7cf984043111d6606da93a5271177b">groupby</a>({<span class="stringliteral">&quot;__src_id&quot;</span>},</div>
<div class="line">                                       {{<span class="stringliteral">&quot;out_degree&quot;</span>, <a class="code" href="namespacegraphlab_1_1aggregate.html#a7960880f3974c4eeaa1a31ac43679d31">aggregate::COUNT</a>()}});</div>
<div class="line">  <span class="keywordflow">return</span> sf;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga2d8058d55689f2f68a1bfd3c6266cebf">BEGIN_FUNCTION_REGISTRATION</a></div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#gafd6f96997a5f904c3d9aa9204417aaf0">REGISTER_FUNCTION</a>(count_out_degree, <span class="stringliteral">&quot;g&quot;</span>);</div>
<div class="line"><a class="code" href="group__group__gl__function__ffi.html#ga24327cae92937381554e92becdbcff32">END_FUNCTION_REGISTRATION</a></div>
</div><!-- fragment --><p>Will allow this to be done in Python: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">import</span> graphlab <span class="keyword">as</span> gl</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">import</span> example</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;g = gl.load_sgraph(<span class="stringliteral">&#39;http://snap.stanford.edu/data/email-Enron.txt.gz&#39;</span>, format=<span class="stringliteral">&#39;snap&#39;</span>)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;ret = example.count_out_degree(g)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># ret now has two columns. &quot;__id&quot;:[7899,25263,5288...] and &quot;out_degree&quot;:[5,1,4,...]</span></div>
</div><!-- fragment --><h1><a class="anchor" id="sec_sgraph_technical_details"></a>
Technical Details</h1>
<h2><a class="anchor" id="sec_sgraph_mutability"></a>
Mutability</h2>
<p><a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a> is structurally immutable. You can add new vertices and edges, but the operation returns a new <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>. The original graph remains unchanged.</p>
<p>For instance, </p><div class="fragment"><div class="line">g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a610c4ee360bd0d487a44fc347043d9e9">add_vertices</a>(verts)</div>
</div><!-- fragment --><p> has no effect.</p>
<p>However, you can modify the attributes of vertices and edges of a <a class="el" href="classgraphlab_1_1gl__sgraph.html">gl_sgraph</a>. The following code, </p><div class="fragment"><div class="line">g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;is_fluffy&quot;</span>] = g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>()[<span class="stringliteral">&quot;__id&quot;</span>] == <span class="stringliteral">&quot;cat&quot;</span>;</div>
<div class="line">g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a430e32ba570ed2f6114835ae4afe528e">vertices</a>().<a class="code" href="classgraphlab_1_1gl__gframe.html#a27c3f341e90f3da573ff6dd37b675da2">remove_column</a>(<span class="stringliteral">&quot;likes_fish&quot;</span>);</div>
</div><!-- fragment --><p> adds a "is_fluffy" column to vertices in g and removes "likes_fish" from vertices in g.</p>
<h2><a class="anchor" id="sec_sgraph_lazy_eval"></a>
Lazy Evaluation</h2>
<p>Like SArray and SFrame, SGraph is also lazily evaluated. Thus regardless of the size of the data, this operation will run quickly. </p><div class="fragment"><div class="line">g = g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#a610c4ee360bd0d487a44fc347043d9e9">add_vertices</a>(verts).<a class="code" href="classgraphlab_1_1gl__sgraph.html#a98c444797769c43ea519aa8658ac6735">add_edges</a>(edges);</div>
</div><!-- fragment --><p>The actual computation doesn't happen until the new graph is queried. For instance, the following simple code may take a long time, because it triggers the graph to be fully materialized. </p><div class="fragment"><div class="line">g.<a class="code" href="classgraphlab_1_1gl__sgraph.html#ad514126dea243295828274ecfd71c079">num_vertices</a>();</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_sgraph_example"></a>
Example</h1>
<p>We provide end to end working code examples for various SGraph functions. Please see examples in <b>sdk_example/</b>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 10 2014 14:35:58 for GraphLab Create SDK API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
