CC := gcc
CXX := g++
CFLAGS := -std=c++11 -I . -shared -fPIC

UNAME_S := $(shell uname -s)
ifeq ($(UNAME_S),Darwin)
	CFLAGS += --stdlib=libc++ -undefined dynamic_lookup
endif

SRCS := $(wildcard *.cpp)
TARGETS := $(SRCS:%.cpp=%.so)

all: $(TARGETS)

%.so: %.cpp
	$(CXX) -o $@ $(CFLAGS) $^

clean:
	rm *.so
